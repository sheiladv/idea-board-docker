# Dockerfile.dev - entorno de desarrollo con hot reload
FROM node:20-alpine

WORKDIR /app

# Forzamos entorno de desarrollo (asegura que npm instale devDependencies)
ENV NODE_ENV=development

# Copiamos los archivos de dependencias
COPY package*.json ./

# Instalar dependencias
RUN npm install --include=dev

# Copiamos todo el código (aunque lo sobrescribirá el volumen)
COPY . .

# Exponemos el puerto del backend
EXPOSE 3000

# Comando de arranque en modo desarrollo (Nest con watch)
CMD ["npm", "run", "start:dev"]
